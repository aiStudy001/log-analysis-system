# 에러 핸들링 수동 테스트 결과

**테스터**: ________________
**테스트 날짜**: 2026-02-__
**환경**:
- OS: Windows / Mac / Linux
- 브라우저: Chrome / Firefox / Edge
- 백엔드: 정상 실행 ✅ / 실패 ❌
- 프론트엔드: 정상 실행 ✅ / 실패 ❌

---

## 프론트엔드 에러 테스트

### Test 1: localStorage 저장 실패 ⭐

**테스트 실행**: ⬜ 완료 / ⬜ 건너뜀

**방법**:
- [ ] 방법 1: 시크릿 모드 + localStorage 무효화
- [ ] 방법 2: Firefox Private + dom.storage.enabled=false

**결과**:
- [ ] ✅ Console에 "Failed to save history" 에러 표시
- [ ] ✅ 화면 우상단에 alert 표시: "히스토리 저장 실패..."
- [ ] ✅ Alert가 5초 후 사라짐

**스크린샷**:
- 파일명: _________________ (예: test1-localStorage-error.png)

**비고**:
```
(문제 발생 시 여기에 기록)
```

---

### Test 2: WebSocket 연결 끊김 ⭐⭐

**테스트 실행**: ⬜ 완료 / ⬜ 건너뜀

**방법**:
- [ ] 방법 1: DevTools Network Offline
- [ ] 방법 2: 백엔드 서버 중지

**결과**:
- [ ] ✅ 채팅창에 에러 메시지: "WebSocket이 연결되지 않았습니다..."
- [ ] ✅ 로딩 인디케이터 즉시 멈춤
- [ ] ✅ 쿼리가 전송되지 않음

**스크린샷**:
- 파일명: _________________

**비고**:
```

```

---

### Test 3: 페이지 라우팅 ⭐

**테스트 실행**: ⬜ 완료 / ⬜ 건너뜀

**방법**:
- [ ] 히스토리 페이지 이동 → 재실행 버튼 클릭

**결과**:
- [ ] ✅ 정상: 홈으로 이동
- [ ] ✅ 대화 내역 로드됨
- [ ] ⬜ (에러 발생 시) alert 표시: "페이지 이동 실패..."

**비고**:
```
정상 작동이 예상됨 (에러 발생 매우 드묾)
```

---

### Test 4: Markdown 파싱 에러 ⭐⭐⭐

**테스트 실행**: ⬜ 완료 / ⬜ 건너뜀 / ⬜ 테스트 어려움

**방법**:
- [ ] Console에서 `marked.parse('**bold [broken')` 실행

**결과**:
- [ ] ✅ 화면 우상단에 info alert: "일부 텍스트 서식을 표시할 수 없습니다."
- [ ] ✅ 1회만 표시됨
- [ ] ✅ 텍스트 평문으로 fallback

**스크린샷**:
- 파일명: _________________

**비고**:
```
테스트가 어려운 경우 건너뛰어도 됨
```

---

### Test 5-1: clarification_failed 이벤트 ⭐⭐

**테스트 실행**: ⬜ 완료 / ⬜ 건너뜀

**방법**:
- [ ] PostgreSQL 중지
- [ ] 질문: "에러 로그 조회" (서비스 명시 안 함)

**결과**:
- [ ] ✅ 채팅창에 에러: "❌ 재질문 생성 실패: 서비스 목록 조회 실패..."
- [ ] ✅ 로딩 멈춤

**스크린샷**:
- 파일명: _________________

**비고**:
```
PostgreSQL 재시작: net start postgresql-x64-13
```

---

### Test 5-2: anomaly_check_error 이벤트 ⭐⭐

**테스트 실행**: ⬜ 완료 / ⬜ 건너뜀 / ⬜ 5분 대기 어려움

**방법**:
- [ ] PostgreSQL 중지 후 5분 대기

**결과**:
- [ ] ✅ 화면 우상단에 warning alert: "이상 탐지 실패: 데이터베이스 연결 오류"
- [ ] ✅ 백그라운드에서 자동 발생

**스크린샷**:
- 파일명: _________________

**비고**:
```
5분 대기가 어려운 경우 서버 로그로 확인
```

---

## 백엔드 에러 테스트

### Test 6: alerting_service 에러 → Alert ⭐⭐

**테스트 실행**: ⬜ 완료 / ⬜ 건너뜀

**방법**:
- [ ] PostgreSQL 중지 후 5분 대기

**결과**:
- [ ] ✅ 서버 로그: "Anomaly check failed: ..." (ERROR 레벨)
- [ ] ✅ 프론트엔드에 alert 표시

**서버 로그 발췌**:
```
(서버 터미널 로그 복사)
```

**비고**:
```

```

---

### Test 7: retrieve_schema_node 예외 처리 ⭐⭐

**테스트 실행**: ⬜ 완료 / ⬜ 건너뜀

**방법**:
- [ ] PostgreSQL 중지
- [ ] 새 쿼리 제출

**결과**:
- [ ] ✅ 서버 로그: "Schema retrieval failed: ..." (ERROR)
- [ ] ✅ 프론트엔드: 에러 메시지 표시
- [ ] ✅ 작업 히스토리에서 실패 표시

**서버 로그 발췌**:
```

```

**프론트엔드 메시지**:
```
(채팅창 에러 메시지 복사)
```

---

### Test 8: clarifier DB 에러 처리 ⭐⭐

**테스트 실행**: ⬜ 완료 / ⬜ 건너뜀

**방법**:
- [ ] PostgreSQL 중지
- [ ] 질문: "에러 로그 조회"

**결과**:
- [ ] ✅ 서버 로그: "Clarification failed: ..." (ERROR)
- [ ] ✅ 프론트엔드: "❌ 재질문 생성 실패..."

**서버 로그 발췌**:
```

```

---

### Test 9: broadcast_alert 로깅 개선 ⭐

**테스트 실행**: ⬜ 완료 / ⬜ 건너뜀

**방법**:
- [ ] 여러 브라우저 탭 열기 (3~4개)
- [ ] Alert 발생시키기

**결과**:
- [ ] ✅ 서버 로그: "Alert broadcast complete: X success, Y failed, Z active connections"

**서버 로그 발췌**:
```
(브로드캐스트 통계 로그 복사)
```

---

### Test 10: cache_service 로깅 추가 ⭐

**테스트 실행**: ⬜ 완료 / ⬜ 건너뜀

**방법**:
- [ ] 동일 쿼리 2번 연속 실행
- [ ] 서버 로그 확인

**결과**:
- [ ] ✅ 정상: 캐시 hit 확인
- [ ] ⬜ (에러 시) "Cache get/set failed" (WARNING)

**서버 로그 발췌**:
```
(캐시 관련 로그 복사)
```

---

## SQL 검증 테스트 (보너스)

### 위험한 키워드 차단

| 쿼리 | 예상 결과 | 실제 결과 | 통과 |
|------|----------|----------|------|
| `DELETE FROM logs` | DELETE 차단 | | ⬜ |
| `UPDATE logs SET ...` | UPDATE 차단 | | ⬜ |
| `DROP TABLE logs` | DROP 차단 | | ⬜ |
| `INSERT INTO logs` | INSERT 차단 | | ⬜ |
| `ALTER TABLE logs` | ALTER 차단 | | ⬜ |
| `SELECT * FROM logs` | ✅ 정상 실행 | | ⬜ |

**스크린샷**:
- 파일명: _________________ (SQL 검증 에러 메시지)

---

## 종합 평가

### 통과한 테스트

**프론트엔드**: _____ / 6 개
**백엔드**: _____ / 5 개
**SQL 검증**: _____ / 6 개

**총점**: _____ / 17 개

### 발견된 문제

1. **문제 1**:
   - 테스트: _________________
   - 현상: _________________
   - 심각도: 낮음 / 보통 / 높음

2. **문제 2**:
   - 테스트: _________________
   - 현상: _________________
   - 심각도: 낮음 / 보통 / 높음

### 개선 제안

```
(테스트하면서 발견한 개선사항 기록)
```

---

## 결론

**전체 평가**:
- [ ] ✅ 모든 에러가 사용자에게 적절히 피드백됨
- [ ] ⚠️ 일부 개선 필요
- [ ] ❌ 주요 문제 발견

**테스트 완료 시간**: _____ 분

**추가 의견**:
```


```

---

**테스트 완료일**: 2026-02-__
**서명**: _________________
