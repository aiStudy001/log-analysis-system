# 로그 분석 시스템 문서 목록

## 📚 문서 개요

이 디렉토리에는 Text-to-SQL 로그 분석 시스템의 상세 설계 문서가 포함되어 있습니다.

총 5개의 핵심 문서로 구성되어 있으며, 각 문서는 시스템의 특정 측면을 심층적으로 다룹니다.

---

## 📖 문서 목록

### 1. [DB 스키마 상세 분석](./db-schema-analysis.md) (46KB)

**내용:**
- ✅ 현재 스키마의 각 필드별 상세 분석 및 적절성 평가
- ✅ 추가/삭제/수정이 필요한 필드 제안 (근거 포함)
- ✅ 인덱스 최적화 전략 (복합 인덱스, 부분 인덱스, JSONB 인덱스)
- ✅ 파티셔닝 전략 (월별/주별/일별 비교)
- ✅ 개선된 최종 스키마 제안
- ✅ 마이그레이션 계획 및 롤백 전략

**주요 개선 사항:**
- ENUM 타입 도입으로 저장 공간 90% 절감
- OpenTelemetry 표준 준수 (trace_id, span_id)
- 네트워크/지역 정보 필드 추가
- PII 필터링 관련 필드 추가
- 성능 메트릭 구조화

**대상 독자:** DB 설계자, 백엔드 개발자, 데이터 엔지니어

---

### 2. [주요 사용 시나리오 상세](./scenarios-detailed.md) (74KB)

**내용:**
- ✅ 38개의 실무 중심 시나리오 정의
- ✅ 각 시나리오별 자연어 프롬프트 (3-5가지 변형)
- ✅ 기대 SQL 쿼리 및 예상 결과
- ✅ 복잡도 분석 (⭐~⭐⭐⭐⭐)
- ✅ Text-to-SQL 에이전트 검증 방법

**시나리오 카테고리:**
- **A. 장애 대응** (10개): 에러 분석, 영향도 파악, 시계열 추적
- **B. 성능 최적화** (8개): 느린 API, 타임아웃, 응답시간 추이
- **C. 데이터 정합성** (5개): 로그 품질 검증, 중복 탐지
- **D. 비용 관리** (4개): 로그 생성량 분석, 저장 최적화
- **E. 보안/프라이버시** (6개): 인증 실패, PII 필터링, SQL 인젝션 탐지
- **F. 사용자 경험** (5개): 프론트엔드 에러, 브라우저 호환성

**대상 독자:** Product Manager, QA 엔지니어, Text-to-SQL 에이전트 개발자

---

### 3. [프로젝트 구조 및 아키텍처](./project-architecture.md) (59KB)

**내용:**
- ✅ 전체 시스템 아키텍처 다이어그램
- ✅ 각 컴포넌트 상세 설명 (코드 포함)
- ✅ 데이터 파이프라인 흐름 (3가지 경로)
- ✅ 디렉토리 구조 제안 (완전한 폴더 트리)
- ✅ 에러 처리 및 복구 전략
- ✅ 확장성 고려사항 (수평 확장, 캐싱, 비동기 처리)

**주요 컴포넌트:**
- **로그 수집 라이브러리**: Python (asyncio) / JavaScript (fetch)
- **FastAPI 로그 서버**: 비동기 배치 처리, Connection Pool
- **Fluentd**: Docker stdout 캡처 및 변환
- **Text-to-SQL 에이전트**: LangChain + Claude Sonnet 4.5

**대상 독자:** Solution Architect, 팀 리더, 시스템 엔지니어

---

### 4. [Fluentd 기술 가이드](./fluentd-guide.md) (27KB)

**내용:**
- ✅ Fluentd 소개 및 핵심 개념
- ✅ Fluentd vs Fluent Bit 상세 비교
- ✅ Docker Logging Driver 통합 (3가지 방법)
- ✅ 설정 파일 구조 및 완전한 예시
- ✅ 파싱/필터링 패턴 (JSON, 정규식, 멀티라인)
- ✅ HTTP 출력 설정 (버퍼링, 재시도, fallback)
- ✅ 성능 튜닝 (Worker, 버퍼 최적화)
- ✅ 트러블슈팅 가이드 (일반적 문제 8가지)

**핵심 내용:**
- 프로덕션 설정 예시 (완전한 fluent.conf)
- 성능 벤치마크 및 메트릭
- GeoIP, PII 필터링 플러그인
- Prometheus 메트릭 수집

**대상 독자:** DevOps 엔지니어, SRE, 인프라 담당자

---

### 5. [AWS 배포 가이드](./aws-deployment-guide.md) (32KB)

**내용:**
- ✅ AWS RDS vs EC2 Docker PostgreSQL 비교
- ✅ EC2 인스턴스 생성 (Terraform 코드 포함)
- ✅ VPC, 보안 그룹, IAM 설정
- ✅ Docker Compose 전체 스택 배포
- ✅ 백업 및 복구 전략 (자동화 스크립트)
- ✅ CloudWatch 통합 (메트릭, 알람, 로그)
- ✅ 비용 최적화 전략 (Spot, Reserved, S3 Tiering)
- ✅ CI/CD 파이프라인 (GitHub Actions)

**배포 시나리오별 비용:**
- 소규모 (< 10GB/일): $48/월
- 중규모 (10-50GB/일): $106/월
- 대규모 (50-100GB/일): $260/월

**대상 독자:** Cloud Engineer, DevOps, 배포 담당자

---

## 🎯 문서 읽기 순서

### 처음 시작하는 경우
1. **[프로젝트 구조 및 아키텍처](./project-architecture.md)** - 전체 시스템 이해
2. **[주요 사용 시나리오](./scenarios-detailed.md)** - 실제 활용 방법
3. **[DB 스키마 분석](./db-schema-analysis.md)** - 데이터 구조 이해

### 개발자
1. **[프로젝트 구조 및 아키텍처](./project-architecture.md)** - 컴포넌트 및 API
2. **[DB 스키마 분석](./db-schema-analysis.md)** - 데이터베이스 설계
3. **[주요 사용 시나리오](./scenarios-detailed.md)** - Text-to-SQL 에이전트 개발

### DevOps/인프라
1. **[Fluentd 기술 가이드](./fluentd-guide.md)** - 로그 수집 설정
2. **[AWS 배포 가이드](./aws-deployment-guide.md)** - 인프라 구축
3. **[프로젝트 구조 및 아키텍처](./project-architecture.md)** - 전체 아키텍처

### Product Manager
1. **[주요 사용 시나리오](./scenarios-detailed.md)** - 기능 및 활용 사례
2. **[프로젝트 구조 및 아키텍처](./project-architecture.md)** - 시스템 개요
3. **[AWS 배포 가이드](./aws-deployment-guide.md)** - 비용 및 운영

---

## 📊 문서 통계

| 문서 | 크기 | 페이지 수 (추정) | 코드 블록 | 다이어그램 |
|-----|------|----------------|----------|-----------|
| DB 스키마 분석 | 46KB | ~60 | 50+ | 5 |
| 시나리오 상세 | 74KB | ~100 | 38+ | 3 |
| 프로젝트 아키텍처 | 59KB | ~80 | 40+ | 8 |
| Fluentd 가이드 | 27KB | ~40 | 30+ | 4 |
| AWS 배포 가이드 | 32KB | ~50 | 35+ | 6 |
| **합계** | **238KB** | **~330** | **193+** | **26** |

---

## 🔗 관련 파일

### 상위 문서
- [../planning-draft.md](../planning-draft.md) - 기획 초안 (이 문서들의 기반)
- [../README.md](../README.md) - 프로젝트 전체 개요

### 구현 코드
- [../services/](../services/) - 실제 서비스 구현
- [../clients/](../clients/) - 로그 수집 클라이언트 라이브러리
- [../infrastructure/](../infrastructure/) - Terraform, Docker 설정

### 테스트
- [../tests/](../tests/) - 단위, 통합, E2E 테스트

---

## ✅ 검증 체크리스트

각 문서 작성 후 다음을 확인하세요:

### DB 스키마
- [ ] 모든 시나리오를 지원하는가?
- [ ] 인덱스 전략이 쿼리 성능을 최적화하는가?
- [ ] 파티셔닝 전략이 대용량 처리를 지원하는가?
- [ ] 마이그레이션 계획이 실행 가능한가?

### 시나리오
- [ ] 자연어 프롬프트가 명확한가?
- [ ] 생성된 SQL이 정확한가?
- [ ] 복잡도 분석이 타당한가?
- [ ] Text-to-SQL 에이전트가 처리 가능한가?

### 아키텍처
- [ ] 모든 컴포넌트가 설명되었는가?
- [ ] 데이터 흐름이 명확한가?
- [ ] 에러 처리 전략이 포함되었는가?
- [ ] 확장성이 고려되었는가?

### Fluentd
- [ ] 설정 파일이 동작하는가?
- [ ] 파싱 패턴이 올바른가?
- [ ] 성능 튜닝 가이드가 적용 가능한가?
- [ ] 트러블슈팅이 실제 문제를 해결하는가?

### AWS 배포
- [ ] Terraform 코드가 실행 가능한가?
- [ ] 보안 설정이 적절한가?
- [ ] 백업 스크립트가 동작하는가?
- [ ] 비용 추정이 정확한가?

---

## 🚀 다음 단계

1. **프로토타입 구현** - 핵심 컴포넌트 개발 시작
2. **스키마 검증** - 샘플 데이터 + 쿼리 테스트
3. **Fluentd 테스트** - 로컬 환경에서 설정 검증
4. **Text-to-SQL 에이전트** - LangChain + Claude 통합
5. **AWS 배포** - 개발 환경 구축

---

## 📞 문의 및 기여

- **작성자**: Log Analysis System Team
- **문서 버전**: 1.0
- **최종 수정일**: 2024-01-15

### 기여 방법
1. 문서 개선 제안: Pull Request
2. 오타/에러 수정: Issue 생성
3. 추가 시나리오 제안: Discussion

---

## 📄 라이선스

이 문서는 프로젝트와 동일한 라이선스를 따릅니다.
